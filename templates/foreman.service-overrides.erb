[Service]
User=<%= scope['foreman::user'] %>
Environment=FOREMAN_ENV=<%= scope['foreman::rails_env'] %>
Environment=FOREMAN_HOME=<%= scope['foreman::app_root'] %>
Environment=FOREMAN_PUMA_THREADS_MIN=<%= scope['foreman::config::min_puma_threads'] %>
Environment=FOREMAN_PUMA_THREADS_MAX=<%= scope['foreman::foreman_service_puma_threads_max'] %>
Environment=FOREMAN_PUMA_WORKERS=<%= scope['foreman::config::puma_workers'] %>
<% unless scope['foreman::foreman_service_puma_worker_timeout'].nil? -%>
# Puma worker_timeout, which specifies the time for each worker to check in
# before it is assumed hanging and then restarted. This is not a request timeout.
Environment=FOREMAN_PUMA_WORKER_TIMEOUT=<%= scope['foreman::foreman_service_puma_worker_timeout'] %>
<% end -%>
